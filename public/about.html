<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About — Cocktail Cartography</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    /* ── Art Deco Design System ─────────────────────────────────── */
    :root {
      --deco-black: #0f0f12;
      --deco-charcoal: #1a1a1d;
      --deco-panel: #16161a;
      --deco-gold: #d4af37;
      --deco-gold-dark: #b8941e;
      --deco-gold-light: #e6c860;
      --deco-cream: #faf3e0;
      --deco-cream-dark: #e8e0c8;
      --deco-cream-muted: #c5b898;
      --text-primary: #faf3e0;
      --text-secondary: #c5b898;
      --text-muted: #8a8070;
      --border-gold: #d4af37;
      --border-dim: #3a3528;
    }

    /* ── Reset & base ─────────────────────────────────────────── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: "Futura", "Century Gothic", "Avenir Next", "Helvetica Neue", Arial, sans-serif;
      font-size: 16px;
      line-height: 1.7;
      background: var(--deco-black);
      color: var(--text-primary);
      letter-spacing: 0.01em;
      min-height: 100vh;
    }

    /* ── Art Deco scrollbars ───────────────────────────────────── */
    * {
      scrollbar-width: thin;
      scrollbar-color: var(--deco-gold) transparent;
    }
    *::-webkit-scrollbar { width: 8px; }
    *::-webkit-scrollbar-track { background: transparent; }
    *::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, var(--deco-gold) 0%, var(--deco-gold-dark) 100%);
      border-radius: 4px;
    }
    *::-webkit-scrollbar-thumb:hover {
      background: var(--deco-gold);
      box-shadow: 0 0 8px rgba(212, 175, 55, 0.4);
    }

    /* ── Fixed Header (minimal) ──────────────────────────────── */
    #main-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: var(--deco-black);
      border-bottom: 2px solid var(--border-gold);
      padding: 20px 0;
    }

    #main-header::after {
      content: "";
      position: absolute;
      bottom: -6px;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(212, 175, 55, 0.15) 20%,
        rgba(212, 175, 55, 0.3) 50%,
        rgba(212, 175, 55, 0.15) 80%,
        transparent 100%
      );
    }

    .header-content {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-title {
      font-size: 1.4rem;
      font-weight: 300;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--deco-gold);
    }

    .back-link {
      color: var(--deco-cream);
      text-decoration: none;
      font-size: 0.9rem;
      padding: 8px 16px;
      border: 1px solid var(--border-dim);
      border-radius: 3px;
      transition: all 0.25s ease;
      background: rgba(22, 22, 26, 0.5);
    }
    .back-link:hover {
      border-color: var(--deco-gold);
      color: var(--deco-gold);
      background: rgba(212, 175, 55, 0.08);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(212, 175, 55, 0.15);
    }

    /* ── Scrollable content area ────────────────────────────── */
    #content-wrapper {
      padding-top: 80px; /* Space for fixed header */
      max-width: 860px;
      margin: 0 auto;
      padding-left: 32px;
      padding-right: 32px;
    }

    /* ── Why section (scrollable) ─────────────────────────────── */
    .why-section {
      padding: 40px 0;
    }

    .why-section h2 {
      font-size: 1.8rem;
      font-weight: 300;
      letter-spacing: 0.08em;
      color: var(--deco-gold);
      margin-bottom: 24px;
      text-transform: uppercase;
    }

    .why-section p {
      margin-bottom: 20px;
      color: var(--deco-cream);
      line-height: 1.8;
    }

    /* ── Sticky reader selection ─────────────────────────────── */
    #reader-wrapper {
      position: sticky;
      top: 70px; /* Below main header */
      z-index: 90;
      background: var(--deco-black);
      padding: 16px 0;
      margin-bottom: 20px;
      border-bottom: 1px solid var(--border-dim);
    }

    .reader-selection {
      background: var(--deco-panel);
      border: 1px solid var(--border-dim);
      border-radius: 3px;
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .reader-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-style: italic;
    }

    .reader-options {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .reader-option {
      display: flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      user-select: none;
      font-size: 0.88rem;
      color: var(--deco-cream);
      transition: color 0.2s ease;
    }
    .reader-option:hover {
      color: var(--deco-gold);
    }

    .option-separator {
      color: var(--text-muted);
      font-size: 0.8rem;
      opacity: 0.5;
    }

    /* Custom radio/checkbox styling */
    .reader-option input[type="radio"],
    .reader-option input[type="checkbox"] {
      appearance: none;
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border: 1.5px solid var(--border-dim);
      background: var(--deco-black);
      cursor: pointer;
      position: relative;
      flex-shrink: 0;
      transition: all 0.25s ease;
    }
    .reader-option input[type="radio"] {
      border-radius: 50%;
    }
    .reader-option input[type="checkbox"] {
      border-radius: 2px;
    }
    .reader-option input:checked {
      border-color: var(--deco-gold);
      background: var(--deco-gold);
    }
    .reader-option input[type="radio"]:checked::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 6px;
      height: 6px;
      background: var(--deco-black);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }
    .reader-option input[type="checkbox"]:checked::after {
      content: "✓";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: var(--deco-black);
      font-size: 10px;
      font-weight: bold;
    }

    /* ── Art Deco divider ────────────────────────────────────── */
    .deco-divider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 30px 0;
      opacity: 0.4;
    }
    .deco-divider .line {
      flex: 1;
      height: 1px;
      background: linear-gradient(
        90deg,
        transparent 0%,
        var(--border-gold) 50%,
        transparent 100%
      );
    }
    .deco-divider .diamond {
      width: 8px;
      height: 8px;
      background: var(--deco-gold);
      transform: rotate(45deg);
    }

    /* ── Dynamic content ──────────────────────────────────────── */
    #content-area {
      padding: 20px 0 60px;
      min-height: 400px;
    }

    .loading {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
      font-style: italic;
    }

    /* ── Markdown content styling ────────────────────────────── */
    .markdown-content {
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .markdown-content h1 {
      font-size: 2rem;
      font-weight: 300;
      letter-spacing: 0.1em;
      margin: 36px 0 20px;
      color: var(--deco-gold);
      text-transform: uppercase;
      border-bottom: 2px solid var(--border-dim);
      padding-bottom: 12px;
    }

    .markdown-content h2 {
      font-size: 1.4rem;
      font-weight: 500;
      letter-spacing: 0.05em;
      margin: 30px 0 16px;
      color: var(--deco-gold-light);
    }

    .markdown-content h3 {
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.03em;
      margin: 24px 0 12px;
      color: var(--deco-cream);
    }

    .markdown-content p {
      margin-bottom: 20px;
      line-height: 1.8;
    }

    .markdown-content ul,
    .markdown-content ol {
      margin: 16px 0 20px 24px;
    }

    .markdown-content li {
      margin-bottom: 8px;
      line-height: 1.7;
    }

    .markdown-content code {
      background: rgba(212, 175, 55, 0.08);
      color: var(--deco-gold-light);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: "Courier New", Courier, monospace;
      font-size: 0.9em;
      border: 1px solid rgba(212, 175, 55, 0.2);
    }

    .markdown-content pre {
      background: var(--deco-panel);
      border: 1px solid var(--border-dim);
      border-radius: 3px;
      padding: 16px;
      overflow-x: auto;
      margin: 20px 0;
    }

    .markdown-content pre code {
      background: none;
      border: none;
      padding: 0;
      color: var(--deco-cream);
    }

    .markdown-content blockquote {
      border-left: 3px solid var(--deco-gold);
      margin: 20px 0;
      padding-left: 20px;
      color: var(--text-secondary);
      font-style: italic;
    }

    .markdown-content strong {
      color: var(--deco-cream);
      font-weight: 600;
    }

    .markdown-content em {
      color: var(--deco-cream-muted);
    }

    .markdown-content hr {
      border: none;
      height: 1px;
      background: linear-gradient(
        90deg,
        transparent 0%,
        var(--border-gold) 20%,
        var(--border-gold) 80%,
        transparent 100%
      );
      margin: 32px 0;
      opacity: 0.3;
    }

    .markdown-content a {
      color: var(--deco-gold);
      text-decoration: none;
      border-bottom: 1px dotted var(--deco-gold);
      transition: all 0.2s ease;
    }
    .markdown-content a:hover {
      color: var(--deco-gold-light);
      border-bottom-style: solid;
    }

    /* ── Footer link to repo ──────────────────────────────────── */
    .footer-link {
      text-align: center;
      padding: 40px 0;
      border-top: 1px solid var(--border-dim);
      margin-top: 60px;
    }

    .footer-link a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.2s ease;
    }
    .footer-link a:hover {
      color: var(--deco-gold);
    }

    /* ── Responsive ───────────────────────────────────────────── */
    @media (max-width: 640px) {
      .header-content,
      #content-wrapper {
        padding-left: 20px;
        padding-right: 20px;
      }

      .header-title {
        font-size: 1.1rem;
      }

      .reader-selection {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .reader-options {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <!-- ═══ Fixed Minimal Header ═══════════════════════════════════ -->
  <header id="main-header">
    <div class="header-content">
      <div class="header-title">Cocktail Cartography</div>
      <a href="index.html" class="back-link">&larr; Back to Map</a>
    </div>
  </header>

  <!-- ═══ Content Wrapper ═════════════════════════════════════════ -->
  <div id="content-wrapper">
    <!-- Why This Exists Section (scrollable) -->
    <div class="why-section">
      <h2>Why this exists</h2>
      <p>
        One thing I love about cocktails is their variety. So it took me a lot
        of years and lot "I ordered this so I guess I'll drink it..." moments
        to figure out what I actually enjoy. Every now and then, you meet a
        great bartender who knows the territory and happens to have the time to
        really understand what you might like (Cecily at ABV 10 years ago,
        stands out in mind). But if you're not lucky enough to run into your
        own Cecily, and especially if you don't exactly speak the local
        language of spirits yet, this page is here to help you learn the
        territory, and hopefully find your next favorite by starting with the
        familiar, and moving into similar territory.
      </p>
      <p>
        But then I went down a rabbit hole trying to figure out how to define
        "similar." I started quantifying ingredients across taste components,
        and that was straightforward, if painstaking. I wound up with 15
        dimensions for each ingredient (sweet, bitter, saline, acid, herbal,
        spice, citrus, floral, fruit, smoke, oak, grain, vegetal, nutty, anise).
      </p>
      <p>
        Then you have to make a cocktail, and that gets complicated. A Negroni
        and a Martinez have very similar recipes (gin, sweet vermouth, and then
        Campari or maraschino liqueur, respectively), but the Campari adds a
        punch of bitterness that makes them quite different. A margarita and a
        gin gimlet come from different worlds, but they're both citrus-forward
        cocktails with a sweet and sour balance. How do we map that out?
      </p>
      <p>
        In the end, I decided... not to decide. Instead, I built this tool to
        explore the territory, and see how different ways of thinking about
        cocktails can lead to different insights, and hopefully find some new
        favorites.
      </p>
    </div>

    <!-- Sticky Reader Selection -->
    <div id="reader-wrapper">
      <div class="reader-selection">
        <div class="reader-label">I am...</div>
        <div class="reader-options">
          <label class="reader-option">
            <input type="radio" name="reader-curious" id="opt-curious" checked />
            <span>Curious</span>
          </label>
          <span class="option-separator">or</span>
          <label class="reader-option">
            <input type="checkbox" id="opt-cocktail" />
            <span>a cocktail nerd</span>
          </label>
          <label class="reader-option">
            <input type="checkbox" id="opt-data" />
            <span>a data nerd</span>
          </label>
        </div>
      </div>
    </div>

    <div class="deco-divider">
      <span class="line"></span>
      <span class="diamond"></span>
      <span class="line"></span>
    </div>

    <!-- Dynamic Content Area -->
    <main id="content-area">
      <div class="loading">Loading...</div>
    </main>

    <!-- Footer with repo link -->
    <div class="footer-link">
      <a href="https://github.com/cotarijo/cocktail_cartography" target="_blank">
        View on GitHub
      </a>
    </div>
  </div>

  <!-- ═══ Scripts ════════════════════════════════════════════════ -->
  <script>
    (function () {
      "use strict";

      // ── Elements ────────────────────────────────────────────────
      const contentArea  = document.getElementById("content-area");
      const optCurious   = document.getElementById("opt-curious");
      const optCocktail  = document.getElementById("opt-cocktail");
      const optData      = document.getElementById("opt-data");

      // ── Configure marked.js ─────────────────────────────────────
      marked.setOptions({
        breaks: false,
        gfm: true,
        headerIds: true,
        mangle: false
      });

      // ── Content cache ────────────────────────────────────────────
      const contentCache = {};

      // ── Load content from markdown file ─────────────────────────
      async function loadContent(fileName) {
        const path = `About-${fileName}.md`;

        try {
          const response = await fetch(path);
          if (!response.ok) {
            throw new Error(`Failed to load ${path}`);
          }
          const markdown = await response.text();

          // Skip the header part (title and "Why this exists" section)
          // since we're displaying that separately
          const lines = markdown.split('\n');
          let contentStart = 0;
          let foundSeparator = false;

          for (let i = 0; i < lines.length; i++) {
            if (lines[i].startsWith('---') && i > 0) {
              if (foundSeparator) {
                contentStart = i + 1;
                break;
              }
              foundSeparator = true;
            }
          }

          const contentOnly = lines.slice(contentStart).join('\n');
          return marked.parse(contentOnly);
        } catch (error) {
          console.error('Error loading content:', error);
          return `<p style="color: var(--text-muted);">Unable to load content. Please try refreshing.</p>`;
        }
      }

      // ── Display content ──────────────────────────────────────────
      async function displayContent() {
        let key;

        if (optCurious.checked) {
          key = 'CURIOUS';
        } else {
          const parts = [];
          if (optCocktail.checked) parts.push('COCKTAIL');
          if (optData.checked) parts.push('DATA');

          if (parts.length === 0) {
            // Nothing selected, default to curious
            optCurious.checked = true;
            key = 'CURIOUS';
          } else if (parts.length === 2) {
            // Both nerds selected
            key = 'COCKTAIL_DATA_NERD';
          } else {
            key = parts[0] + '_NERD';
          }
        }

        // Show loading if not cached
        if (!contentCache[key]) {
          contentArea.innerHTML = '<div class="loading">Loading...</div>';
        }

        // Load and cache content
        if (!contentCache[key]) {
          contentCache[key] = await loadContent(key);
        }

        // Display with fade animation
        const html = contentCache[key];
        contentArea.innerHTML =
          '<div class="markdown-content">' + html + "</div>";
      }

      // ── Event handlers ───────────────────────────────────────────
      optCurious.addEventListener("change", function () {
        if (this.checked) {
          optCocktail.checked = false;
          optData.checked = false;
          displayContent();
        }
      });

      optCocktail.addEventListener("change", function () {
        if (this.checked) {
          optCurious.checked = false;
        }
        displayContent();
      });

      optData.addEventListener("change", function () {
        if (this.checked) {
          optCurious.checked = false;
        }
        displayContent();
      });

      // ── Initial load ─────────────────────────────────────────────
      displayContent();
    })();
  </script>
</body>
</html>